import { useEffect, useState } from 'react'

export const useSafeRole = (safeAddress: string, signer: string) => {
  const [role, setRole] = useState<'owner' | 'viewer' | 'unknown'>('unknown')

  useEffect(() => {
    fetch(`https://safe-transaction-mainnet.safe.global/api/v1/safes/${safeAddress}/`)
      .then(res => res.json())
      .then(data => {
        if (data.owners.includes(signer)) setRole('owner')
        else setRole('viewer')
      })
  }, [safeAddress, signer])

  return role
}
